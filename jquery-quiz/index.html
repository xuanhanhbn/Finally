<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css">
    <title>Document</title>
    <style>
        html,
        body {
            margin: 0;
        }

        #container {
            background: rgb(0, 162, 255);
            width: 100%;
            height: 100vh;
            display: flex;
            align-items: center;
            position: relative;
        }


        .frames {
            width: 500px;
            margin: 0 auto;
            background: white;
            border: 1px solid blue;
            padding: 16px;

        }

        #quiz-footer {
            margin-top: 12px;
            display: flex;
            justify-content: space-around;
        }

        button {
            color: white;
            width: 80px;
            border: none;
            height: 30px;
            background: linear-gradient(180deg, rgb(255, 0, 255), rgb(0, 132, 255));
        }



        #quiz-content {
            margin-bottom: 15px;
            /* text-align: center; */
            font-size: 20px;
            font-weight: 500;
        }

        .item {
            background-color: #ccc;
            min-height: 40px;
            align-items: center;
            display: flex;
            height: 33px;
            cursor: pointer;
        }

        .item:hover {
            background: #888;
        }

        input {
            height: 15px;
            width: 20px;
            margin-right: 6px;
            cursor: pointer;
        }

        .display-block {
            display: block !important;
        }

        .display-none {
            display: none !important;
        }

        label {
            height: 100%;
            width: 100%;
            display: flex;
            align-items: center;
            cursor: pointer;
        }

        .item+.item {
            margin-top: 6px;
        }

        .red {
            background-color: red;
        }

        .green {
            background-color: green;
        }

        #btn2 {
            display: none;
        }

        .reset,
        .continue,
        .stop,
        .start {
            width: 100px;
            background: linear-gradient(180deg, rgb(255, 0, 255), rgb(0, 132, 255));
            height: 30px;
            display: flex;
            justify-content: center;
            align-items: center;
            border: 1px solid #42FBF2;
            margin: 10px auto 10px;
            /* box-shadow: inset 0 0 0 0 rgb(95, 4, 91); */
            /* outline: none; */
            transition: ease-in 0.3s;
            border: none;
            color: white;
            position: relative;
            z-index: 1;

        }

        .reset:before,
        .continue:before,
        .stop:before,
        .start:before {

            position: absolute;
            top: 0;
            left: 50%;
            right: 50%;
            bottom: 0;
            content: "";
            transition: 0.5s all ease;
            background: rgb(0, 162, 255);
            opacity: 0;
            color: white;


        }

        .reset:hover:before,
        .continue:hover:before,
        .stop:hover:before,
        .start:hover:before,
        button:hover:before {
            transition: 0.5s all ease;
            left: 0;
            right: 0;
            opacity: 1;
            z-index: -1;
        }


        button:hover {
            opacity: 0.8;
            background: #06c1f0;
            color: white;
        }



        #time {
            align-items: center;
            justify-content: center;
            display: flex;
            height: 40px;
            margin: 10px 0;
            font-size: 25px
        }

        .wrapper {
            display: none;
        }


        .information {
            position: absolute;
            top: 0;
            right: 0;
            bottom: 0;
            left: 0;
            background: rgba(0, 0, 0, 0.3);
            display: none;
            /* display: flex; */
            justify-content: center;
            align-items: center;
        }

        .information-content {
            background-color: white;
            width: 550px;
            height: 400px;
            text-align: center;
            flex-direction: column;
            align-items: center;
            display: flex;
            padding: 1rem;
            justify-content: center;
        }

        .icon {
            width: 80px;
            height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            margin-top: -70px;
        }

        .icon i {
            color: white;
            font-size: 4rem;
        }

        .title {
            font-family: cursive;
        }

        .result {
            font-size: 31px;
            font-family: cursive;
        }
        
        .succser,
        .come-back,
        .load {
            margin-top: 20px;
            height: 40px;
            min-width: 100px;
            justify-content: center;
            display: flex;
            align-items: center;
            border: 1px solid #ccc;
            border-radius: 20px;
            font-size: 20px;
            padding: 0 10px;
            color: white;
            background: #06c1f0;
            cursor: pointer;
        }
        .succser i,
        .load i {
            margin-left: 10px;
        }
        .come-back:hover,
        .succser:hover .load:hover {
            transition: .5s all ease;
            opacity: 0.8;
        }

        .come-back {
            display: none;
        }

    </style>
</head>

<body>
    <div id="container">
        <div class="frames">
            <div id="quiz">
                <!-- <div id="time">
          <span id="hours"></span><span id="minute"></span><span id="seconds"></span><span id="tens"></span>
        </div> -->
                <div id="quiz-content"> </div>
                <div id="quiz-question" id-quiz="">
                    <form action="">
                    </form>
                </div>
                <div id="quiz-footer">
                    <!-- <button id="btn1">Quay lại</button> -->
                    <button id="btn3">Kiểm tra</button>
                    <button id="btn2">Bài tiếp</button>
                </div>
                <div class="information">
                    <div class="information-content">
                        <div class="icon"></div>
                        <h2 class="title"></h2>
                        <div class="result">total score: <span id="do"></span> /<span id="total"></span></div>
                        <div class="load"> </div>
                        <div class="come-back">Quay lại</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script>

        let list = [
            {
                id: 0,
                content: ' Câu 1 : Những số nhỏ hơn hoặc bằng 10 ?',
                type: "checkbox",
                name: "cau1",
                option: ["a. 5", "b. 13", "c. 41", "d. 10", "e.12"],
                option1: ["a", "b", "c", "d", "e"],
                correctAnswer: ["a", "d"]
            },
            {
                id: 1,
                content: 'Câu 2 : 2 * 2   = ?',
                type: "radio",
                name: "cau2",
                option: ["a. 15", "b. 2", "c. 3", "d. 4",],
                option1: ["a", "b", "c", "d"],
                correctAnswer: ["d"]
            },
            {
                id: 2,
                content: 'Câu 3: 22 + 21 = ? ',
                type: "radio",
                name: "cau3",
                option: ["a. 5", "b. 53", "c. 33", "d. 43",],
                option1: ["a", "b", "c", "d"],
                correctAnswer: ["d"]
            },
            {
                id: 3,
                content: 'Câu 4: 4 * 4 = ?',
                type: "radio",
                name: "cau4",
                option: ["a. 35", "b. 232", "c. 16", "d. 123",],
                option1: ["a", "b", "c", "d"],
                correctAnswer: ["c"]
            },
            {
              id: 5,
              content: 'Câu 6: "Nhập gia  ..." làm sao ?',
              type: "radio",
              name: "cau6",
              option: ["a. tùy cảnh", "b. tùy tâm", "c. tùy tục", "d. tùy người",],
              option1: ["a", "b", "c", "d"],
              correctAnswer: ["c"]
            },
        ]

        let index = 0
        let numinput = 1
        let checkInput;
        let quantity = 0;
        let lengList = list.length

        //   in các câu hỏi ra input          
        function renderQuiz() {
            $("#quiz-question").attr("id-quiz", index)

            $("#quiz-content").text(list[index].content)
            // for (let i = 0; i < lengList; i++) {
            let options = list[index].option
            let valueInput = list[index].option1
            let html = options.map((option) => {
                let num = numinput++
                return `
                    <div class="item">
                            <input type="${list[index].type}" id="input${num}" name="cau${list[index].id + 1}" value="${valueInput[num - 1]}">
                            <label for="input${num}"> <span>${option}</span></label><br>
                        </div>

                    `
            })
            $("form").html(html)
            // }
        }

        renderQuiz()



        // $("#btn1").click(handle1)
        $("#btn2").click(handle2)
        $('#btn3').click(handle3)

        // bài tiếp theo || quay lại bài 
        function changeQuiz(number) {
            if (number === 2) {
                numinput = 1
                index++
                if (index >= lengList) {
                    index = lengList - 1
                }
            } if (number === 1) {
                numinput = 1
                index--
                if (index < 0) {
                    index = 0
                }
            }
            $("#btn2").css("display", "none")
            $("#btn3").css("display", "block")
            renderQuiz()
        }

        // thông báo kết quả bài làm 
        function information(number) {


            if (number === 1) {
                $(".information").css("display", "flex")
                $('.icon').css({
                    "background": "#43d617",
                })
                $('.icon').html(`<i class="fa-solid fa-check"></i>`)
                $(".title").text("Bài làm Tốt")
                $("#do").text(quantity)
                $("#total").text(lengList)
                $(".load").attr("class", "succser")
                $(".succser").text("Đến Trang Chúc Mừng")
                $(".come-back").css("display","flex")

                $(".succser").click(function () {
                    window.location = "index2.html";
                })

            } if (number === 2) {
                $(".information").css("display", "flex")
                $('.icon').css({
                    "background": "#FF5252",
                })
                $('.icon').html(`<i class="fa-solid fa-xmark"></i>`)
                $(".title").text("Bài làm chưa tốt")
                $("#do").text(quantity)
                $("#total").text(lengList)
                $(".load").html(`Làm Lại <i class="fa-solid fa-arrows-rotate"></i>`)
            }
        }

        // information ()

        // Hàm kiểm tra check và đổi background
        function testInput(answer, checkInput, inputAll) {
            let answerLength = answer.length

            const result = JSON.stringify(checkInput) === JSON.stringify(answer)
            if (result) {
                quantity++
                for (let j = 0; j < answerLength; j++) {
                    $(`input[value=${answer[j]}]`).parent().addClass('green')
                }
            } else {
                for (let i = 0; i < inputAll.length; i++) {

                    if (inputAll.eq(i).prop('checked')) {
                        for (let j = 0; j < answerLength; j++) {
                            $(`input[value=${answer[j]}]`).parent().addClass('green')
                        }

                        inputAll.eq(i).parent().addClass('red')
                    }
                }
            }

        }


        // quay lại bài
        // function handle1() {
        //     changeQuiz(1)
        // }

        // bài tiếp
        function handle2() {
            changeQuiz(2)
        }

        //kiểm tra 
        function handle3() {
            let answer = list[index].correctAnswer

            let inputAll = $("input")
            checkInput = []

            for (let i = 0; i < inputAll.length; i++) {

                if (inputAll.eq(i).prop('checked')) {

                    checkInput.push(inputAll.eq(i).val())

                    $("#btn2").css("display", "block")
                    $("#btn3").css("display", "none")

                    for (let j = 0; j < inputAll.length; j++) {
                        inputAll.eq(j).prop("disabled", true)
                    }
                }
            }
            testInput(answer, checkInput, inputAll)

            if (index === lengList - 1) {

                if (quantity === lengList) {
                    information(1)

                } else {
                    information(2)
                }

            }
        }

        //   
        $(".load").click(function () {
            location.reload()
        })
        $(".come-back").click(function() {
            location.reload()
        })



    </script>
</body>

</html>